import{d as S,u as q,j as z,r as c,k as M,c as U,h as r,b as a,m as k,n as C,w as l,e as i,p as j,o as b,i as u,t as p,E as V,f as L,g as Z,q as $,_ as F}from"./index-CbheMMSM.js";import{s as G}from"./orders-CTmTAZmG.js";const H={class:"page"},J={class:"hero"},K={class:"card-header"},Q={class:"actions"},W=S({__name:"DashboardView",setup(X){const D=q(),T=L(),x=Z(),m=z(()=>{var t;return((t=D.user)==null?void 0:t.role)==="ADMIN"}),f=c(""),_=c(!1),d=c([]),g=c(),v=c(!1),h=[{value:"UNPAID",label:"未打款",tag:"warning"},{value:"NOT_RECEIVED",label:"未收货",tag:"info"},{value:"PAID",label:"已打款",tag:"success"}],N=t=>{var e;return((e=h.find(s=>s.value===t))==null?void 0:e.label)??"未知"},I=t=>{var e;return((e=h.find(s=>s.value===t))==null?void 0:e.tag)??"info"},E=t=>t?t.replace("T"," ").replace("Z",""):"-",A=async()=>{const t=f.value.split(/\n|,|;/).map(e=>e.trim()).filter(Boolean);if(!t.length){V.warning("请先输入单号");return}_.value=!0;try{const e=await G(t);if(!e.length){V.warning("未查询到对应订单");return}d.value=e}finally{_.value=!1}},B=()=>{d.value=[]},R=()=>{T.push("/orders")};return M(()=>x.query.focus,async t=>{var e,s;t==="profile"&&(await $(),v.value=!0,(s=(e=g.value)==null?void 0:e.$el)==null||s.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{v.value=!1},1500))},{immediate:!0}),(t,e)=>{const s=i("el-button"),y=i("el-tag"),O=i("el-input"),w=i("el-card"),n=i("el-table-column"),P=i("el-table");return b(),U("div",H,[r("div",J,[e[2]||(e[2]=r("div",null,[r("h2",null,"物流单号快速查询"),r("p",{class:"sub"},"输入运单号即可查询是否已录入、打款或收货")],-1)),m.value?(b(),k(s,{key:0,type:"primary",onClick:R},{default:l(()=>[...e[1]||(e[1]=[u("前往订单管理",-1)])]),_:1})):C("",!0)]),a(w,{ref_key:"profileCard",ref:g,class:j({highlight:v.value})},{header:l(()=>[r("div",K,[e[3]||(e[3]=r("span",null,"查询面板",-1)),a(y,{size:"small",type:m.value?"danger":"info"},{default:l(()=>[u(p(m.value?"管理员":"用户"),1)]),_:1},8,["type"])])]),default:l(()=>[a(O,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),type:"textarea",rows:4,placeholder:"支持多个单号，换行 / 逗号 / 分号分隔"},null,8,["modelValue"]),r("div",Q,[a(s,{type:"primary",loading:_.value,onClick:A},{default:l(()=>[...e[4]||(e[4]=[u("查询",-1)])]),_:1},8,["loading"]),a(s,{text:"",disabled:!d.value.length,onClick:B},{default:l(()=>[...e[5]||(e[5]=[u("清空结果",-1)])]),_:1},8,["disabled"])]),e[6]||(e[6]=r("p",{class:"tips"}," 如需录入、批量导入或导出，请切换到左侧导航的“物流单号”模块；查询结果仅保留在当前页面。 ",-1))]),_:1},8,["class"]),d.value.length?(b(),k(w,{key:0,class:"table-card"},{default:l(()=>[a(P,{data:d.value,style:{width:"100%"}},{default:l(()=>[a(n,{prop:"orderDate",label:"下单日期",width:"140"}),a(n,{prop:"orderTime",label:"时间",width:"200"},{default:l(({row:o})=>[u(p(E(o.orderTime)),1)]),_:1}),a(n,{prop:"trackingNumber",label:"运单号",width:"200"}),a(n,{prop:"model",label:"型号"}),a(n,{prop:"category",label:"分类",width:"120"}),a(n,{prop:"amount",label:"金额",width:"120"},{default:l(({row:o})=>[u(p(o.amount??"-")+" "+p(o.currency),1)]),_:1}),a(n,{prop:"status",label:"状态",width:"140"},{default:l(({row:o})=>[a(y,{type:I(o.status)},{default:l(()=>[u(p(N(o.status)),1)]),_:2},1032,["type"])]),_:1}),a(n,{prop:"remark",label:"备注"})]),_:1},8,["data"])]),_:1})):C("",!0)])}}}),te=F(W,[["__scopeId","data-v-a5031b75"]]);export{te as default};
