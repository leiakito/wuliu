import{d as y,u as k,r as p,a as x,c as h,b as o,w as t,e as c,f as a,g as C,l as E,E as R,h as q,i as B,o as N,_ as U}from"./index-xnLysfLr.js";const L={class:"login-wrapper"},T=y({__name:"LoginView",setup(A){const m=B(),f=q(),d=k(),l=p(),n=p(!1),s=x({username:"",password:""}),_={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},w=async()=>{if(!(!l.value||!await l.value.validate().catch(()=>!1))){n.value=!0;try{const e=await E({...s});d.setToken(e.token),d.setUser({username:e.username,role:e.role}),R.success("登录成功");const r=f.query.redirect||"/dashboard";m.replace(r)}catch(e){console.error(e)}finally{n.value=!1}}};return(g,e)=>{const r=a("el-input"),i=a("el-form-item"),V=a("el-button"),b=a("el-form"),v=a("el-card");return N(),h("div",L,[o(v,{class:"login-card",shadow:"always"},{default:t(()=>[e[3]||(e[3]=c("h2",null,"物流对账系统",-1)),e[4]||(e[4]=c("p",{class:"sub-title"},"Vue + Element Plus 管理端",-1)),o(b,{ref_key:"formRef",ref:l,model:s,rules:_,"label-position":"top"},{default:t(()=>[o(i,{label:"用户名",prop:"username"},{default:t(()=>[o(r,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),placeholder:"请输入用户名",autocomplete:"username"},null,8,["modelValue"])]),_:1}),o(i,{label:"密码",prop:"password"},{default:t(()=>[o(r,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),placeholder:"请输入密码",type:"password","show-password":"",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),o(V,{type:"primary",class:"login-btn",loading:n.value,onClick:w},{default:t(()=>[...e[2]||(e[2]=[C("登录",-1)])]),_:1},8,["loading"])]),_:1},8,["model"])]),_:1})])}}}),M=U(T,[["__scopeId","data-v-fc8c4754"]]);export{M as default};
